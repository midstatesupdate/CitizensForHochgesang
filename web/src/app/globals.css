@import "tailwindcss";

/*
  Theme tokens
  - Set data-theme on <html> to swap themes.
  - Keep tokens semantic so future themes can swap palettes easily.
*/
:root,
[data-theme='dark'] {
  --color-canvas: #0f0a1b;
  --color-surface: #1a1229;
  --color-ink: #f6f2ff;
  --color-muted: #c3b6e4;
  --color-border: #3c2d59;
  --color-accent: #b896ff;
  --color-accent-contrast: #1b0f30;
  --color-accent-2: #f2c45a;
  --color-accent-2-contrast: #2d1c00;
  --color-highlight: #2a1f42;
  --page-gradient: radial-gradient(circle at top left, rgba(184, 150, 255, 0.18), transparent 45%),
    radial-gradient(circle at 20% 20%, rgba(242, 196, 90, 0.12), transparent 38%),
    linear-gradient(180deg, #0f0a1b 0%, #161025 48%, #120c20 100%);

  --motion-shift-y: -4px;
  --motion-card-scale: 1.008;
  --motion-image-scale: 1.045;
  --motion-title-shift-x: 2px;
  --motion-cta-shift-x: 5px;
  --motion-overlay-shift: -8%;
  --motion-link-duration: 220ms;
  --motion-card-duration: 260ms;
  --text-link-thickness: 1px;
  --text-link-opacity: 1;
  --scroll-reveal-distance: 18px;
  --scroll-reveal-scale: 0.985;
  --scroll-reveal-duration: 540ms;
  --bg-animation-duration: 7s;
  --texture-opacity: 0.32;
  --texture-brightness: 1;
  --texture-contrast: 1;
  --texture-scale: 1;
  --texture-size-1: cover;
  --texture-size-2: cover;
  --texture-size-3: cover;
  --texture-position-1: 50% 50%;
  --texture-position-2: 50% 50%;
  --texture-position-3: 50% 50%;
  --texture-repeat-1: no-repeat;
  --texture-repeat-2: no-repeat;
  --texture-repeat-3: no-repeat;
  --texture-animation-primary: none;
  --texture-animation-secondary: none;
  --tracer-opacity: 0.2;
  --tracer-speed: 32s;
  --bg-animation-timing-primary: ease-in-out;
  --bg-animation-timing-secondary: ease-in-out;
  --bg-animation-timing-tracer: ease-in-out;
}

.bg-anim-fps-normal {
  --bg-animation-timing-primary: ease-in-out;
  --bg-animation-timing-secondary: ease-in-out;
  --bg-animation-timing-tracer: ease-in-out;
}

.bg-anim-fps-stepped {
  --bg-animation-timing-primary: steps(200, end);
  --bg-animation-timing-secondary: steps(220, end);
  --bg-animation-timing-tracer: steps(170, end);
}

.motion-still {
  --motion-shift-y: 0px;
  --motion-card-scale: 1;
  --motion-image-scale: 1;
  --motion-title-shift-x: 0px;
  --motion-cta-shift-x: 0px;
  --motion-overlay-shift: 0%;
  --motion-link-duration: 120ms;
  --motion-card-duration: 120ms;
}

[data-theme='light'] {
  --color-canvas: #f7f3fb;
  --color-surface: #ffffff;
  --color-ink: #2f1854;
  --color-muted: #5c4a77;
  --color-border: #ded1ee;
  --color-accent: #4a2778;
  --color-accent-contrast: #ffffff;
  --color-accent-2: #e2ad33;
  --color-accent-2-contrast: #2f1854;
  --color-highlight: #f7e9b5;
  --page-gradient: radial-gradient(circle at top left, rgba(74, 39, 120, 0.14), transparent 45%),
    radial-gradient(circle at 20% 20%, rgba(226, 173, 51, 0.14), transparent 40%),
    linear-gradient(180deg, #f7f3fb 0%, #fefdf8 45%, #f6f0ff 100%);
}

.motion-calm {
  --motion-shift-y: -2px;
  --motion-card-scale: 1.003;
  --motion-image-scale: 1.02;
  --motion-title-shift-x: 1px;
  --motion-cta-shift-x: 2px;
  --motion-overlay-shift: -4%;
  --motion-link-duration: 180ms;
  --motion-card-duration: 220ms;
}

.motion-balanced {
  --motion-shift-y: -4px;
  --motion-card-scale: 1.008;
  --motion-image-scale: 1.045;
  --motion-title-shift-x: 2px;
  --motion-cta-shift-x: 5px;
  --motion-overlay-shift: -8%;
  --motion-link-duration: 220ms;
  --motion-card-duration: 260ms;
}

.motion-energetic {
  --motion-shift-y: -6px;
  --motion-card-scale: 1.012;
  --motion-image-scale: 1.065;
  --motion-title-shift-x: 3px;
  --motion-cta-shift-x: 7px;
  --motion-overlay-shift: -12%;
  --motion-link-duration: 260ms;
  --motion-card-duration: 300ms;
}

.motion-lively {
  --motion-shift-y: -5px;
  --motion-card-scale: 1.01;
  --motion-image-scale: 1.055;
  --motion-title-shift-x: 2px;
  --motion-cta-shift-x: 6px;
  --motion-overlay-shift: -10%;
  --motion-link-duration: 240ms;
  --motion-card-duration: 280ms;
}

.scroll-reveal-none {
  --scroll-reveal-distance: 0px;
  --scroll-reveal-scale: 1;
  --scroll-reveal-duration: 0ms;
}

.scroll-reveal-soft {
  --scroll-reveal-distance: 16px;
  --scroll-reveal-scale: 0.99;
  --scroll-reveal-duration: 520ms;
}

.scroll-reveal-dynamic {
  --scroll-reveal-distance: 28px;
  --scroll-reveal-scale: 0.976;
  --scroll-reveal-duration: 700ms;
}

.scroll-reveal-cascade {
  --scroll-reveal-distance: 22px;
  --scroll-reveal-scale: 0.984;
  --scroll-reveal-duration: 760ms;
}

.bg-anim-none {
  --bg-animation-duration: 0s;
  --texture-animation-primary: none;
  --texture-animation-secondary: none;
  --texture-brightness: 1;
  --texture-contrast: 1;
}

.bg-anim-drift {
  --bg-animation-duration: 14s;
  --texture-animation-primary: texture-drift var(--bg-animation-duration) var(--bg-animation-timing-primary) infinite alternate;
  --texture-animation-secondary: texture-breathe calc(var(--bg-animation-duration) * 1.1) var(--bg-animation-timing-secondary) infinite;
  --texture-brightness: 1.02;
  --texture-contrast: 1.01;
}

.bg-anim-tracers {
  --bg-animation-duration: 16s;
  --texture-animation-primary: texture-drift calc(var(--bg-animation-duration) * 1.05) var(--bg-animation-timing-primary) infinite alternate;
  --texture-animation-secondary: texture-breathe calc(var(--bg-animation-duration) * 0.95) var(--bg-animation-timing-secondary) infinite;
  --texture-brightness: 1.03;
  --texture-contrast: 1.015;
  --tracer-opacity: 0.08;
  --tracer-speed: 15.5s;
}

.bg-anim-drift-tracers {
  --bg-animation-duration: 18s;
  --texture-animation-primary: texture-drift calc(var(--bg-animation-duration) * 1.08) var(--bg-animation-timing-primary) infinite alternate;
  --texture-animation-secondary: texture-breathe calc(var(--bg-animation-duration) * 0.9) var(--bg-animation-timing-secondary) infinite;
  --texture-brightness: 1.025;
  --texture-contrast: 1.012;
  --tracer-opacity: 0.075;
  --tracer-speed: 17.5s;
}

.bg-anim-pulse {
  --bg-animation-duration: 7.5s;
  --texture-animation-primary: texture-pulse var(--bg-animation-duration) var(--bg-animation-timing-primary) infinite;
  --texture-animation-secondary: none;
  --texture-brightness: 1.03;
  --texture-contrast: 1.018;
}

.text-links-subtle {
  --text-link-thickness: 1px;
  --text-link-opacity: 0.8;
}

.text-links-sweep {
  --text-link-thickness: 1px;
  --text-link-opacity: 1;
}

.text-links-none {
  --text-link-thickness: 0px;
  --text-link-opacity: 0;
}

.text-links-glint {
  --text-link-thickness: 1px;
  --text-link-opacity: 0.92;
}

@theme inline {
  --color-canvas: var(--color-canvas);
  --color-surface: var(--color-surface);
  --color-ink: var(--color-ink);
  --color-muted: var(--color-muted);
  --color-border: var(--color-border);
  --color-accent: var(--color-accent);
  --color-accent-contrast: var(--color-accent-contrast);
  --color-accent-2: var(--color-accent-2);
  --color-accent-2-contrast: var(--color-accent-2-contrast);
  --color-highlight: var(--color-highlight);
  --font-sans: var(--font-body);
  --font-mono: var(--font-mono);
  --font-display: var(--font-display);
}

/* Base elements */
@layer base {
  html {
    color: var(--color-ink);
    background: var(--color-canvas);
  }

  body {
    min-height: 100vh;
    background: var(--page-gradient);
    font-family: var(--font-body);
    color: var(--color-ink);
    position: relative;
  }

  ::selection {
    background: var(--color-highlight);
  }

  :focus-visible {
    outline: 2px solid var(--color-accent-2);
    outline-offset: 3px;
  }

  a,
  button,
  summary,
  [role='button'] {
    cursor: pointer;
  }

  button:disabled,
  [aria-disabled='true'] {
    cursor: not-allowed;
  }

  a {
    transition: color 200ms ease, text-decoration-color 200ms ease, text-underline-offset 200ms ease,
      transform 200ms ease;
    text-decoration-color: transparent;
    text-underline-offset: 0.2em;
  }

  a:not(.btn):not(.nav-link):not(.link-pill):not(.icon-btn):not(.skip-link):not(.home-link) {
    color: var(--color-accent);
    position: relative;
    text-decoration: none;
    background-image: linear-gradient(
      color-mix(in srgb, currentColor calc(var(--text-link-opacity) * 100%), transparent),
      color-mix(in srgb, currentColor calc(var(--text-link-opacity) * 100%), transparent)
    );
    background-size: 0% var(--text-link-thickness);
    background-repeat: no-repeat;
    background-position: 0 100%;
    transition: background-size var(--motion-link-duration) ease, color var(--motion-link-duration) ease;
  }

  a:not(.btn):not(.nav-link):not(.link-pill):not(.icon-btn):not(.skip-link):not(.home-link):hover {
    background-size: 100% var(--text-link-thickness);
    color: color-mix(in srgb, var(--color-accent) 84%, var(--color-accent-2) 16%);
    text-decoration: none;
  }

  .text-links-glint a:not(.btn):not(.nav-link):not(.link-pill):not(.icon-btn):not(.skip-link):not(.home-link) {
    background-image:
      linear-gradient(
        color-mix(in srgb, currentColor calc(var(--text-link-opacity) * 100%), transparent),
        color-mix(in srgb, currentColor calc(var(--text-link-opacity) * 100%), transparent)
      ),
      linear-gradient(
        110deg,
        transparent 0 38%,
        color-mix(in srgb, white 38%, transparent) 50%,
        transparent 62% 100%
      );
    background-size: 0% var(--text-link-thickness), 220% 100%;
    background-position: 0 100%, 120% 0;
  }

  .text-links-glint a:not(.btn):not(.nav-link):not(.link-pill):not(.icon-btn):not(.skip-link):not(.home-link):hover {
    background-size: 100% var(--text-link-thickness), 220% 100%;
    background-position: 0 100%, -20% 0;
  }
}

/* Reusable patterns */
@layer components {
  .page-shell {
    @apply relative mx-auto flex min-h-screen max-w-6xl flex-col gap-12 px-4 py-10 sm:gap-16 sm:px-6 sm:py-16;
    isolation: isolate;
  }

  .page-shell::before {
    content: '';
    position: fixed;
    inset: -12%;
    pointer-events: none;
    z-index: -2;
    opacity: var(--texture-opacity);
    transform: translate3d(0, 0, 0) scale(var(--texture-scale));
    filter: brightness(var(--texture-brightness)) contrast(var(--texture-contrast));
    background-size: var(--texture-size-1), var(--texture-size-2), var(--texture-size-3);
    background-position: var(--texture-position-1), var(--texture-position-2), var(--texture-position-3);
    background-repeat: var(--texture-repeat-1), var(--texture-repeat-2), var(--texture-repeat-3);
    animation: var(--texture-animation-primary), var(--texture-animation-secondary);
    transition: opacity 320ms ease;
  }

  .page-shell::after {
    content: '';
    position: fixed;
    inset: -12%;
    pointer-events: none;
    z-index: -2;
    opacity: 0;
    transform: translate3d(0, 0, 0) scale(1);
    background:
      radial-gradient(circle at 16% 20%, color-mix(in srgb, var(--color-accent) 16%, transparent), transparent 42%),
      radial-gradient(circle at 82% 28%, color-mix(in srgb, var(--color-accent-2) 12%, transparent), transparent 40%),
      radial-gradient(circle at 44% 86%, color-mix(in srgb, var(--color-highlight) 20%, transparent), transparent 46%);
  }

  .page-bg-stately-gradient::before {
    --texture-opacity: 0.4;
    --texture-size-1: 180% 180%;
    --texture-size-2: 155% 155%;
    --texture-size-3: 155% 155%;
    --texture-position-1: 14% 12%;
    --texture-position-2: 86% 14%;
    --texture-position-3: 50% 50%;
    background:
      radial-gradient(circle at 18% 14%, color-mix(in srgb, var(--color-accent) 16%, transparent), transparent 48%),
      radial-gradient(circle at 84% 14%, color-mix(in srgb, var(--color-accent-2) 13%, transparent), transparent 44%),
      linear-gradient(
        180deg,
        color-mix(in srgb, var(--color-highlight) 18%, transparent),
        transparent 42%,
        color-mix(in srgb, var(--color-accent) 9%, transparent)
      );
  }

  .page-bg-civic-fabric::before {
    --texture-opacity: 0.3;
    --texture-size-1: 84px 84px;
    --texture-size-2: 92px 92px;
    --texture-size-3: 165% 165%;
    --texture-repeat-1: repeat;
    --texture-repeat-2: repeat;
    --texture-repeat-3: no-repeat;
    background:
      repeating-linear-gradient(
        45deg,
        color-mix(in srgb, var(--color-border) 48%, transparent) 0 2px,
        transparent 2px 12px
      ),
      repeating-linear-gradient(
        -45deg,
        color-mix(in srgb, var(--color-highlight) 42%, transparent) 0 2px,
        transparent 2px 14px
      );
  }

  .page-bg-diagonal-wash::before {
    --texture-opacity: 0.34;
    --texture-size-1: 170% 170%;
    --texture-size-2: 170% 170%;
    --texture-size-3: 170% 170%;
    background: linear-gradient(
      125deg,
      color-mix(in srgb, var(--color-highlight) 42%, transparent),
      transparent 36%,
      color-mix(in srgb, var(--color-accent) 12%, transparent) 72%,
      transparent
    );
  }

  .page-bg-signal-grid::before {
    --texture-opacity: 0.28;
    --texture-size-1: 46px 46px;
    --texture-size-2: 46px 46px;
    --texture-size-3: 175% 175%;
    --texture-repeat-1: repeat;
    --texture-repeat-2: repeat;
    --texture-repeat-3: no-repeat;
    background:
      linear-gradient(
        color-mix(in srgb, var(--color-border) 60%, transparent) 1px,
        transparent 1px
      ),
      linear-gradient(90deg, color-mix(in srgb, var(--color-border) 60%, transparent) 1px, transparent 1px),
      radial-gradient(circle at 20% 10%, color-mix(in srgb, var(--color-accent) 14%, transparent), transparent 55%);
  }

  .page-bg-topo-lines::before {
    --texture-opacity: 0.42;
    --texture-size-1: 78px 78px;
    --texture-size-2: 94px 94px;
    --texture-size-3: 170% 170%;
    --texture-repeat-1: repeat;
    --texture-repeat-2: repeat;
    --texture-repeat-3: no-repeat;
    background:
      repeating-radial-gradient(
        circle at 16% 20%,
        color-mix(in srgb, var(--color-border) 42%, transparent) 0 2px,
        transparent 2px 12px
      ),
      repeating-radial-gradient(
        circle at 78% 66%,
        color-mix(in srgb, var(--color-highlight) 38%, transparent) 0 2px,
        transparent 2px 11px
      );
  }

  .page-shell.bg-anim-tracers::after,
  .page-shell.bg-anim-drift-tracers::after {
    opacity: var(--tracer-opacity);
    background:
      linear-gradient(
        115deg,
        transparent 0% 46%,
        color-mix(in srgb, var(--color-accent-2) 24%, transparent) 50%,
        transparent 54% 100%
      ),
      linear-gradient(
        30deg,
        transparent 0% 45%,
        color-mix(in srgb, var(--color-accent) 22%, transparent) 50%,
        transparent 55% 100%
      ),
      radial-gradient(circle at 15% 15%, color-mix(in srgb, var(--color-highlight) 12%, transparent), transparent 58%);
    background-size: 420px 420px, 420px 420px, 180% 180%;
    background-repeat: repeat;
    animation: tracer-glide var(--tracer-speed) var(--bg-animation-timing-tracer) infinite alternate,
      tracer-flicker 4.5s var(--bg-animation-timing-secondary) infinite;
  }

  .page-shell.bg-anim-tracers::after {
    transform: translate3d(0, 0, 0) scale(1.004);
  }

  .page-shell.bg-anim-drift-tracers::after {
    animation: tracer-glide var(--tracer-speed) var(--bg-animation-timing-tracer) infinite alternate,
      tracer-flicker 5s var(--bg-animation-timing-secondary) infinite;
  }

  .page-shell-container-standard {
    max-width: 72rem;
  }

  .page-shell-container-narrow {
    max-width: 62rem;
  }

  .page-shell-container-wide {
    max-width: 84rem;
  }

  .home-link {
    @apply whitespace-nowrap;
    text-decoration: none;
    transition: color var(--motion-link-duration) ease, filter var(--motion-link-duration) ease;
  }

  .home-link-lockup {
    @apply grid leading-tight;
    grid-template-rows: repeat(2, minmax(0, auto));
  }

  .home-link-line {
    @apply block;
  }

  .home-link:hover {
    color: color-mix(in srgb, var(--color-ink) 78%, white 22%);
    filter: brightness(1.08);
    text-decoration: none;
  }

  .eyebrow {
    @apply text-xs font-semibold uppercase tracking-[0.28em] text-[color:var(--color-muted)] sm:tracking-[0.4em];
  }

  .section-title {
    @apply text-xl font-semibold text-[color:var(--color-ink)] sm:text-3xl;
    font-family: var(--font-display);
    transition: color 220ms ease, text-shadow 220ms ease;
  }

  .hero-title {
    @apply text-3xl font-semibold text-[color:var(--color-ink)] sm:text-5xl;
    font-family: var(--font-display);
  }

  .site-nav {
    @apply relative flex items-center;
  }

  .site-nav-mobile-panel {
    @apply absolute right-0 top-full z-[110] mt-2 grid min-w-[13rem] gap-2 rounded-2xl border border-[color:var(--color-border)] bg-[color:var(--color-surface)] p-2 shadow-[0_14px_32px_rgba(47,24,84,0.22)];
  }

  .nav-link-mobile {
    @apply w-full justify-start rounded-xl;
  }

  .campaign-hero {
    @apply grid gap-8;
  }

  .campaign-hero-clean-split,
  .campaign-hero-portrait-left {
    @apply md:grid-cols-[1.05fr_0.95fr] md:items-center;
  }

  .campaign-hero-text {
    @apply flex flex-col gap-6;
  }

  .campaign-focus-list {
    @apply grid gap-3 text-sm text-[color:var(--color-muted)];
  }

  .campaign-focus-list li {
    @apply rounded-2xl border border-[color:var(--color-border)] bg-[color:var(--color-surface)]/65 px-4 py-3;
  }

  .campaign-hero-media {
    @apply relative flex flex-col gap-4;
  }

  .campaign-hero-image {
    @apply h-auto w-full object-cover;
    aspect-ratio: 4 / 5;
    border-radius: 2rem;
    box-shadow: 0 24px 56px color-mix(in srgb, var(--color-accent) 16%, transparent);
  }

  .campaign-hero-donate {
    @apply w-fit;
  }

  .campaign-proof-strip {
    @apply flex flex-wrap gap-3;
  }

  .campaign-hero-clean-split .campaign-proof-strip,
  .campaign-hero-portrait-left .campaign-proof-strip {
    @apply md:col-span-2;
  }

  .campaign-hero-portrait-left .campaign-hero-text {
    @apply md:order-2;
  }

  .campaign-hero-portrait-left .campaign-hero-media {
    @apply md:order-1;
  }

  .campaign-hero-immersive-frame .campaign-hero-immersive-overlay {
    @apply absolute inset-0 flex flex-col justify-end gap-5 p-5 sm:p-9;
    background:
      linear-gradient(
        180deg,
        color-mix(in srgb, var(--color-canvas) 6%, transparent) 0%,
        color-mix(in srgb, var(--color-canvas) 28%, transparent) 44%,
        color-mix(in srgb, var(--color-canvas) 86%, transparent) 100%
      ),
      linear-gradient(105deg, color-mix(in srgb, var(--color-highlight) 16%, transparent), transparent 52%);
  }

  .campaign-hero-immersive-frame {
    @apply relative overflow-hidden;
    border-radius: 2.2rem;
    min-height: clamp(22rem, 58vh, 44rem);
  }

  .campaign-hero-immersive-frame .campaign-hero-image {
    width: 100%;
    height: 100%;
    min-height: inherit;
    border-radius: inherit;
    aspect-ratio: auto;
    object-position: center 24%;
  }

  .card {
    @apply rounded-3xl border border-[color:var(--color-border)] bg-[color:var(--color-surface)] p-5 shadow-[0_10px_30px_rgba(47,24,84,0.1)] transition sm:p-6;
    transition-property: transform, box-shadow, border-color, background-color;
    transition-duration: 220ms;
    transition-timing-function: ease;
  }

  .card:hover {
    transform: translateY(-2px);
    border-color: color-mix(in srgb, var(--color-accent) 30%, var(--color-border));
    box-shadow: 0 14px 36px color-mix(in srgb, var(--color-accent) 20%, transparent);
  }

  .nav-link {
    @apply inline-flex items-center rounded-full px-3 py-2 text-[color:var(--color-muted)] transition;
    transition-property: color, background-color, transform, border-color;
    transition-duration: 200ms;
    text-decoration: none;
    border: 1px solid transparent;
  }

  .nav-link:hover {
    @apply bg-[color:var(--color-highlight)] text-[color:var(--color-ink)];
    border-color: color-mix(in srgb, var(--color-accent) 20%, var(--color-border));
    transform: translateY(-1px);
  }

  .nav-link-active {
    @apply bg-[color:var(--color-highlight)] text-[color:var(--color-ink)];
    border-color: color-mix(in srgb, var(--color-accent) 30%, var(--color-border));
    box-shadow: inset 0 0 0 1px color-mix(in srgb, var(--color-accent) 14%, transparent);
  }

  .breadcrumbs-shell {
    @apply pointer-events-none relative z-20 mx-auto flex w-full max-w-6xl items-center px-4 sm:px-6;
    min-height: 1.75rem;
  }

  .breadcrumbs-list {
    @apply pointer-events-auto flex w-full min-w-0 flex-wrap items-center gap-1 text-xs text-[color:var(--color-muted)];
  }

  .breadcrumbs-list-active {
    @apply px-1 py-1;
    margin-bottom: -0.9rem;
  }

  .breadcrumbs-shell-empty {
    opacity: 0.6;
  }

  .breadcrumbs-item {
    @apply inline-flex min-w-0 items-center gap-1;
  }

  .breadcrumbs-label {
    @apply block max-w-[20rem] truncate;
  }

  @media (min-width: 640px) {
    .breadcrumbs-label {
      max-width: 28rem;
    }
  }

  .breadcrumbs-link {
    @apply text-[color:var(--color-muted)] transition;
    text-decoration: none;
  }

  .breadcrumbs-link:hover {
    color: color-mix(in srgb, var(--color-accent) 76%, var(--color-muted));
    text-decoration: none;
  }

  .breadcrumbs-current {
    color: color-mix(in srgb, var(--color-ink) 72%, var(--color-muted));
    font-weight: 500;
  }

  .breadcrumbs-sep {
    opacity: 0.55;
    user-select: none;
  }

  .link-soft {
    @apply text-[color:var(--color-accent)];
    position: relative;
    text-decoration: none;
    background-image: linear-gradient(currentColor, currentColor);
    background-size: 0% 1px;
    background-repeat: no-repeat;
    background-position: 0 100%;
    transition: background-size 220ms ease, color 220ms ease;
  }

  .link-soft:hover {
    background-size: 100% 1px;
    color: color-mix(in srgb, var(--color-accent) 84%, var(--color-accent-2) 16%);
    text-decoration: none;
  }

  .link-pill {
    @apply inline-flex items-center gap-2 rounded-full border border-[color:var(--color-border)] px-4 py-2 text-sm font-semibold text-[color:var(--color-accent)];
    text-decoration: none;
    background:
      linear-gradient(
        90deg,
        color-mix(in srgb, var(--color-highlight) 70%, transparent),
        color-mix(in srgb, var(--color-highlight) 25%, transparent)
      )
      left/0% 100% no-repeat;
    transition: background-size 240ms ease, transform 220ms ease, color 220ms ease, border-color 220ms ease,
      box-shadow 220ms ease;
  }

  .link-pill:hover {
    background-size: 100% 100%;
    transform: translateY(-1px);
    border-color: color-mix(in srgb, var(--color-accent) 32%, var(--color-border));
    box-shadow: 0 10px 22px color-mix(in srgb, var(--color-accent) 18%, transparent);
    text-decoration: none;
  }

  .link-pill-news:hover {
    color: color-mix(in srgb, var(--color-accent) 70%, #7aa3ff 30%);
  }

  .link-pill-events:hover {
    color: color-mix(in srgb, var(--color-accent) 72%, #4fbf9f 28%);
  }

  .link-pill-media:hover {
    color: color-mix(in srgb, var(--color-accent) 72%, #f477c1 28%);
  }

  .link-pill-support:hover {
    color: color-mix(in srgb, var(--color-accent) 68%, var(--color-accent-2) 32%);
  }

  .card-media {
    @apply mb-4 overflow-hidden rounded-2xl border border-[color:var(--color-border)] bg-[color:var(--color-canvas)];
  }

  .article-card {
    position: relative;
    overflow: hidden;
    transform-origin: center;
  }

  .article-card::before {
    content: '';
    position: absolute;
    inset: 0;
    pointer-events: none;
    opacity: 0;
    transform: translateX(var(--motion-overlay-shift));
    transition: opacity var(--motion-link-duration) ease, transform var(--motion-card-duration) ease;
    background: linear-gradient(
      130deg,
      color-mix(in srgb, var(--color-highlight) 26%, transparent),
      transparent 45%
    );
  }

  .article-title,
  .article-meta,
  .article-cta {
    transition: color var(--motion-link-duration) ease, transform var(--motion-link-duration) ease;
  }

  .article-card .card-media img {
    transition: transform var(--motion-card-duration) ease, filter var(--motion-card-duration) ease;
    will-change: transform;
  }

  .card.article-card:hover {
    transform: translateY(var(--motion-shift-y)) scale(var(--motion-card-scale));
    box-shadow: 0 20px 42px color-mix(in srgb, var(--color-accent) 24%, transparent);
  }

  .article-card:hover::before {
    opacity: 1;
    transform: translateX(0);
  }

  .article-card:hover .article-title {
    color: color-mix(in srgb, var(--color-accent) 84%, var(--color-accent-2) 16%);
    transform: translateX(var(--motion-title-shift-x));
  }

  .article-card:hover .article-meta {
    color: color-mix(in srgb, var(--color-muted) 80%, var(--color-accent) 20%);
    transform: translateX(1px);
  }

  .article-card:hover .article-cta {
    transform: translateX(var(--motion-cta-shift-x));
  }

  .article-card:hover .card-media img {
    transform: scale(var(--motion-image-scale));
    filter: saturate(1.1) contrast(1.04);
  }

  .news-card {
    overflow: hidden;
  }

  .news-card-content-wrap {
    @apply flex flex-col gap-4;
  }

  .news-card-copy {
    @apply flex min-w-0 flex-col gap-3;
  }

  .news-card-media {
    @apply mb-0;
  }

  .news-card-layout-stacked .news-card-content-wrap {
    @apply flex-col;
  }

  .news-card-layout-no-photo .news-card-content-wrap {
    @apply flex-col;
  }

  .news-card-layout-no-photo .news-card-copy {
    @apply gap-4;
  }

  .news-excerpt-link {
    @apply block rounded-lg;
  }

  .news-excerpt {
    display: -webkit-box;
    -webkit-line-clamp: 6;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
    line-height: 1.35;
    -webkit-mask-image: linear-gradient(to bottom, #000 72%, transparent 100%);
    mask-image: linear-gradient(to bottom, #000 72%, transparent 100%);
  }

  .news-card-layout-no-photo .news-excerpt {
    -webkit-line-clamp: 7;
  }

  .news-excerpt-link:hover .news-excerpt {
    color: color-mix(in srgb, var(--color-muted) 78%, var(--color-ink) 22%);
  }

  .news-card-layout-image-left .news-card-content-wrap,
  .news-card-layout-image-right .news-card-content-wrap,
  .news-card-layout-feature-split .news-card-content-wrap {
    @apply md:grid md:items-start md:gap-5;
    grid-template-columns: minmax(0, 1fr) minmax(0, 1.35fr);
  }

  .news-card-layout-image-left .news-card-media,
  .news-card-layout-feature-split .news-card-media {
    @apply md:order-1;
  }

  .news-card-layout-image-left .news-card-copy,
  .news-card-layout-feature-split .news-card-copy {
    @apply md:order-2;
  }

  .news-card-layout-image-right .news-card-media {
    @apply md:order-2;
  }

  .news-card-layout-image-right .news-card-copy {
    @apply md:order-1;
  }

  .news-card-layout-feature-split .news-card-media {
    @apply md:rounded-3xl;
  }

  .news-card-anim-fade-up {
    animation: news-fade-up 520ms ease both;
  }

  .news-card-anim-slide-up {
    animation: news-slide-up 560ms ease both;
  }

  .news-card-anim-slide-left {
    animation: news-slide-left 560ms ease both;
  }

  .news-card-anim-slide-right {
    animation: news-slide-right 560ms ease both;
  }

  .news-card-anim-none {
    animation: none;
  }

  .skip-link {
    @apply absolute left-4 top-4 z-50 -translate-y-20 rounded-md bg-[color:var(--color-accent)] px-3 py-2 text-sm font-semibold text-[color:var(--color-accent-contrast)] transition;
  }

  .skip-link:focus-visible {
    transform: translateY(0);
  }

  .reveal {
    animation: reveal-up 560ms ease-out both;
  }

  .btn {
    @apply inline-flex items-center justify-center gap-2 rounded-full px-6 py-3 text-sm font-semibold transition;
  }

  .btn-primary {
    @apply bg-[color:var(--color-accent)] text-[color:var(--color-accent-contrast)] shadow-[0_10px_25px_rgba(74,39,120,0.35)];
  }

  .btn-outline {
    @apply border border-[color:var(--color-border)] text-[color:var(--color-ink)];
  }

  .btn-accent {
    @apply bg-[color:var(--color-accent-2)] text-[color:var(--color-accent-2-contrast)] shadow-[0_10px_25px_rgba(226,173,51,0.35)];
  }

  .btn:hover {
    transform: translateY(-1px) scale(1.01);
    filter: saturate(1.05);
    text-decoration: none;
  }

  .btn:active {
    transform: translateY(0) scale(0.995);
  }

  .btn-primary:hover {
    background-color: color-mix(in srgb, var(--color-accent) 88%, var(--color-accent-2) 12%);
  }

  .btn-outline:hover {
    background-color: color-mix(in srgb, var(--color-highlight) 65%, var(--color-surface));
    border-color: color-mix(in srgb, var(--color-accent) 34%, var(--color-border));
  }

  .btn-accent:hover {
    background-color: color-mix(in srgb, var(--color-accent-2) 85%, var(--color-highlight) 15%);
  }

  .icon-btn {
    @apply inline-flex items-center justify-center gap-2 rounded-full border border-[color:var(--color-border)] bg-[color:var(--color-surface)] px-4 py-2 text-sm font-semibold text-[color:var(--color-ink)] transition;
  }

  .icon-btn-sm {
    @apply h-9 w-9 p-0;
  }

  .icon-btn:hover {
    @apply bg-[color:var(--color-highlight)] text-[color:var(--color-accent)];
    transform: translateY(-1px);
    text-decoration: none;
  }

  .pill-badge {
    @apply inline-flex items-center gap-2 rounded-full border border-[color:var(--color-border)] px-3 py-1.5 text-xs font-semibold text-[color:var(--color-muted)];
  }

  .pill-badge-active {
    @apply bg-[color:var(--color-highlight)] text-[color:var(--color-ink)];
  }

  .pill-badge {
    transition: background-color 180ms ease, border-color 180ms ease, color 180ms ease, transform 180ms ease;
  }

  .pill-badge:hover {
    transform: translateY(-1px);
    border-color: color-mix(in srgb, var(--color-accent) 28%, var(--color-border));
  }

  .search-field {
    @apply flex items-center gap-2 rounded-2xl border border-[color:var(--color-border)] bg-[color:var(--color-surface)] px-3 py-2;
  }

  .map-frame {
    @apply overflow-hidden rounded-2xl border border-[color:var(--color-border)] bg-[color:var(--color-surface)];
    height: 19rem;
  }

  .article-experience {
    --scene-duration: 760ms;
    --scene-delay: 0ms;
  }

  .story-image {
    @apply overflow-hidden rounded-2xl border border-[color:var(--color-border)] bg-[color:var(--color-canvas)];
  }

  .story-scene {
    @apply rounded-2xl border border-[color:var(--color-border)] bg-[color:var(--color-surface)]/90 p-5;
    opacity: 0;
    transform: translate3d(0, 20px, 0) scale(0.992);
    transition:
      opacity var(--scene-duration) ease,
      transform var(--scene-duration) cubic-bezier(0.22, 0.82, 0.26, 1),
      filter var(--scene-duration) ease;
    transition-delay: var(--scene-delay);
    filter: saturate(0.96) brightness(0.99);
    will-change: transform, opacity;
  }

  .story-scene.scene-visible {
    opacity: 1;
    transform: translate3d(0, 0, 0) scale(1);
    filter: saturate(1) brightness(1);
  }

  .scene-anim-none {
    opacity: 1;
    transform: none;
    filter: none;
    transition: none;
  }

  .scene-anim-slide-left {
    transform: translate3d(-28px, 0, 0);
  }

  .scene-anim-slide-right {
    transform: translate3d(28px, 0, 0);
  }

  .scene-anim-zoom-soft {
    transform: translate3d(0, 14px, 0) scale(0.965);
  }

  .scene-layout-text {
    @apply grid gap-4;
  }

  .scene-layout-highlight {
    @apply grid gap-4;
    background: linear-gradient(
      145deg,
      color-mix(in srgb, var(--color-highlight) 56%, transparent),
      color-mix(in srgb, var(--color-surface) 70%, transparent)
    );
  }

  .scene-layout-split-left,
  .scene-layout-split-right {
    @apply grid gap-5 md:grid-cols-2 md:items-center;
  }

  .scene-layout-split-left .story-scene-media {
    @apply md:order-first;
  }

  .scene-layout-split-right .story-scene-media {
    @apply md:order-last;
  }

  .story-scene-content {
    @apply grid gap-4;
  }

  .story-scene-title {
    @apply text-xl font-semibold text-[color:var(--color-ink)];
    font-family: var(--font-display);
  }

  .story-scene-media {
    @apply overflow-hidden rounded-2xl border border-[color:var(--color-border)] bg-[color:var(--color-canvas)];
    min-height: 14rem;
  }

  .story-stat {
    @apply grid gap-4;
  }

  .story-stat-grid {
    @apply grid gap-3 sm:grid-cols-2;
  }

  .story-stat-item {
    @apply rounded-xl border border-[color:var(--color-border)] bg-[color:var(--color-canvas)]/65 p-4;
  }

  .story-stat-value {
    @apply text-2xl font-semibold text-[color:var(--color-accent)];
    font-family: var(--font-display);
  }

  .story-stat-label {
    @apply mt-1 text-sm font-semibold text-[color:var(--color-ink)];
  }

  .story-stat-note {
    @apply mt-1 text-xs text-[color:var(--color-muted)];
  }

  .tone-news .eyebrow {
    color: color-mix(in srgb, var(--color-accent) 75%, #7aa3ff 25%);
  }

  .tone-events .eyebrow {
    color: color-mix(in srgb, var(--color-accent) 74%, #4fbf9f 26%);
  }

  .tone-media .eyebrow {
    color: color-mix(in srgb, var(--color-accent) 72%, #f477c1 28%);
  }

  .tone-support .eyebrow {
    color: color-mix(in srgb, var(--color-accent) 65%, var(--color-accent-2) 35%);
  }

  .tone-news .section-title,
  .tone-events .section-title,
  .tone-media .section-title,
  .tone-support .section-title {
    text-shadow: 0 1px 0 color-mix(in srgb, var(--color-highlight) 35%, transparent);
  }

  .loading-bar {
    background: linear-gradient(
      90deg,
      rgba(222, 209, 238, 0.75) 0%,
      rgba(247, 233, 181, 0.95) 50%,
      rgba(222, 209, 238, 0.75) 100%
    );
    background-size: 200% 100%;
    animation: shimmer 1.2s ease-in-out infinite;
  }
}

.scroll-dynamic-item {
  opacity: 0;
  transform: translateY(var(--scroll-reveal-distance)) scale(var(--scroll-reveal-scale));
  transition: opacity var(--scroll-reveal-duration) ease, transform var(--scroll-reveal-duration) ease;
}

.scroll-reveal-cascade .scroll-dynamic-item {
  transition-timing-function: cubic-bezier(0.2, 0.85, 0.24, 1);
}

.scroll-reveal-cascade .scroll-dynamic-item:nth-of-type(2n) {
  transition-delay: 60ms;
}

.scroll-reveal-cascade .scroll-dynamic-item:nth-of-type(3n) {
  transition-delay: 120ms;
}

.scroll-dynamic-visible {
  opacity: 1;
  transform: translateY(0) scale(1);
}

@keyframes shimmer {
  0% {
    background-position: 200% 0;
  }

  100% {
    background-position: -200% 0;
  }
}

@keyframes bg-drift {
  0% {
    transform: translate3d(-1.6%, -1%, 0) scale(1);
  }

  100% {
    transform: translate3d(1.3%, 1.5%, 0) scale(1.03);
  }
}

@keyframes texture-drift {
  0% {
    transform: translate3d(-1.8%, -1.3%, 0) scale(var(--texture-scale));
    background-position: var(--texture-position-1), var(--texture-position-2), var(--texture-position-3);
  }

  100% {
    transform: translate3d(1.9%, 1.5%, 0) scale(calc(var(--texture-scale) * 1.028));
    background-position:
      calc(50% + 2.8%) calc(50% + 1.7%),
      calc(50% - 2.6%) calc(50% - 1.5%),
      calc(50% + 1.2%) calc(50% + 1%);
  }
}

@keyframes texture-breathe {
  0%,
  100% {
    opacity: var(--texture-opacity);
  }

  50% {
    opacity: calc(var(--texture-opacity) + 0.02);
  }
}

@keyframes texture-pulse {
  0%,
  100% {
    transform: translate3d(0, 0, 0) scale(var(--texture-scale));
  }

  50% {
    transform: translate3d(1%, -0.8%, 0) scale(calc(var(--texture-scale) * 1.02));
  }
}

@keyframes tracer-glide {
  0% {
    background-position: 0 0, 0 0, 0 0;
  }

  100% {
    background-position: 220px 220px, -200px 200px, 16px -10px;
  }
}

@keyframes tracer-flicker {
  0% {
    opacity: calc(var(--tracer-opacity) * 0.78);
  }

  50% {
    opacity: calc(var(--tracer-opacity) * 1.08);
  }

  100% {
    opacity: var(--tracer-opacity);
  }
}

@keyframes reveal-up {
  from {
    opacity: 0;
    transform: translateY(12px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes news-fade-up {
  from {
    opacity: 0;
    transform: translateY(14px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes news-slide-up {
  from {
    opacity: 0;
    transform: translateY(18px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes news-slide-left {
  from {
    opacity: 0;
    transform: translateX(20px);
  }

  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes news-slide-right {
  from {
    opacity: 0;
    transform: translateX(-20px);
  }

  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@media (prefers-reduced-motion: reduce) {
  .page-shell::before,
  .page-shell::after,
  .article-card::before,
  .article-card .card-media img,
  .scroll-dynamic-item,
  a,
  .card,
  .article-title,
  .article-meta,
  .article-cta,
  .nav-link,
  .link-soft,
  .link-pill,
  .btn,
  .icon-btn,
  .pill-badge,
  .loading-bar,
  .reveal {
    animation: none !important;
    transition: none !important;
  }
}
